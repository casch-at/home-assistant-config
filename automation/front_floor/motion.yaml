- id: front_floor_motion_detected
  alias: Turn on lights in front floor -- motion detected
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: d362c802f675d2a59d2080b94ebef8e4
    entity_id: binary_sensor.front_floor_motion
    domain: binary_sensor
  condition:
  - condition: template
    value_template: '{{ states(''sensor.front_floor_lightlevel'')|float < 55.0 }}'
  - condition: state
    entity_id: input_boolean.front_floor_switch_active
    state: 'off'
  action:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.front_floor_motion_running
  - service: scene.apply
    data:
      entities:
        light.front_floor:
          brightness: |
            {% if states('input_select.daytime') == 'Morning' or states('input_select.daytime') == 'Daytimes' -%}
              254
            {% elif states('input_select.daytime') == 'Evening' -%}
              140
            {% elif states('input_select.daytime') == 'Night' -%}
              80
            {% endif %}
          color_temp: |
            {% if states('input_select.daytime') == 'Morning' or states('input_select.daytime') == 'Daytimes' -%}
              271
            {% elif states('input_select.daytime') == 'Evening' -%}
              400
            {% elif states('input_select.daytime') == 'Night' -%}
              480
            {% endif %}
          state: 'on'
  mode: single
