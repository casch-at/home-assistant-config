- id: daytime
  alias: Set daytime
  description: Set daytime "Morning" and "Evening" based on sun elevation and "Daytimes" based on lightlevel.
  mode: single
  trigger:
  # Sets Morning daytime
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: 5

  # Sets DAYTIMES daytime
  - platform: numeric_state
    entity_id: sensor.front_floor_lightlevel
    above: 100
    for:
      minutes: 10

  # Sets EVENING daytime
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: 2
  condition: []
  action:
  - choose:

    - conditions:
      - condition: template
        value_template: "{{ trigger.entity_id == 'sun.sun' }}"
      sequence:
      - service: input_select.select_option
        entity_id: input_select.daytime
        data:
          option: 'Morning'

    - conditions:
      - condition: template
        value_template: "{{ trigger.entity_id == 'sensor.front_floor_lightlevel' }}"
      sequence:
      - service: input_select.select_option
        entity_id: input_select.daytime
        data:
          option: 'Daytimes'

    - conditions:
      - condition: template
        value_template: "{{ trigger.entity_id == 'sun.sun' }}"
      sequence:
      - service: input_select.select_option
        entity_id: input_select.daytime
        data:
          option: 'Evening'

    # State Night will be set be the NIGHT mode
    default: []
