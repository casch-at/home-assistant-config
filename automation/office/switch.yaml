- id: office_switch
  alias: Office switch
  description: ''
  mode: queued
  max: 5
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 642b984be9421b3292c2416ee01bf22c
  condition:
  - condition: template
    value_template: |-
      {{
        trigger.event.data.command in [
          'single', 'double', 'hold', 'release',
        ]
      }}
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.command == "single" }}'
      sequence:
      - choose:
        - conditions:
          - condition: or
            conditions:
              - condition: state
                entity_id: light.office_ceiling_lights
                state: 'off'
          sequence:
          - service: light.turn_on
            target:
              entity_id: light.office_ceiling_lights
        default:
        - service: light.turn_off
          target:
            entity_id: light.office_ceiling_lights

    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.command == "double" }}'
      sequence:
      - service: switch.turn_on
        target:
          entity_id:
            - switch.wake_on_lan_tower
            - switch.desk_switch

    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.command == "hold" }}'
      sequence:
      - choose:
        - conditions:
          - condition: or
            conditions:
            - condition: state
              entity_id: light.office_ceiling_lights
              state: 'off'
            - condition: state
              entity_id: light.office_back_light
              state: 'on'
          sequence:
          - service: light.turn_on
            target:
              entity_id:
              - light.office_front_light
          - service: light.turn_off
            target:
              entity_id:
              - light.office_back_light
        default:
        - service: light.turn_on
          target:
            entity_id:
            - light.office_back_light
        - service: light.turn_off
          target:
            entity_id:
            - light.office_front_light
